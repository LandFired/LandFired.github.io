# CPU测试与磁传感器监测 DEMO

## 目录结构

- `cpu_magnetometer_test_v2.html`：主页面，集成CPU测试与磁传感器监测功能。
- `main.js`：入口脚本，负责页面初始化、事件绑定、模块协作。
- `cpu_bench.js`：CPU测试核心逻辑模块，包含CPUBench类。
- `magnetometer_monitor.js`：磁传感器监测模块，包含MagnetometerMonitor类。
- `cpu_worker.js`：Web Worker脚本，执行原子CPU操作。
- `style.css`：页面样式。

## CPU测试逻辑说明

1. **任务与原子任务**
   - 原子任务：最小的CPU操作单元（如加法、乘法、开方等，编号4/5等）。
   - 任务：由一组原子任务组成（如任务1=[4,5,4,5]）。

2. **用户输入**
   - 任务1原子任务序列（如4,5,4,5）
   - 任务2原子任务序列（如5,4,5,4）
   - 任务序列（如1,2,1,2,2,1），表示依次执行任务1、任务2……
   - 原子任务时间（每个原子任务执行时长，单位ms）
   - 任务总时间（每个任务执行总时长，单位ms）
   - 总时长（测试总时长，单位ms）

3. **执行流程**
   - 每个线程循环执行任务序列，直到总时长达到。
   - 每个任务依次执行其所有原子任务，每个原子任务耗时为设定值。
   - 若任务内所有原子任务完成后未满任务总时间，则休眠补足到任务总时间。
   - 进入下一个任务，任务序列执行完后自动循环，直到总时长。

4. **多线程实现**
   - 根据CPU核心数自动创建Web Worker线程。
   - 每个线程独立循环执行完整任务序列，互不干扰。

5. **进度与状态**
   - 页面实时显示测试进度与状态。
   - 支持磁传感器数据同步采集与展示。

## 使用方法

1. 打开`cpu_magnetometer_test_v2.html`，在浏览器中访问。
2. 输入任务参数，点击"开始CPU测试"即可。
3. 可同时监测磁传感器数据。

---

如需扩展更多任务类型或原子操作，可在`cpu_worker.js`和`cpu_bench.js`中自定义实现。
